<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"> -->
    <link rel="stylesheet" href="..//static/css/style.css">
</head>
<style>
    .roomArrangment{
      margin-left: auto;
      margin-right: auto;
    }
    #floor{
        margin-top: -30px;
        margin-left: 200px;
    }

    .rooms{
        height: 40px;
        width: 200px;
        background-color: #2D3956;
        color: white;
        text-align: center;
    }
    #firstfloor{
        margin-left: 180px;
        text-align: center;
        display: none;
    }
    #secondfloor{
        margin-left: 180px;

        display: none;
        text-align: center;
    }
    
    #thirdfloor{
        margin-left: 180px;

        text-align: center;
        display: none;

    }
    #groundfloor{
        margin-left: 180px;

        display: none;
        text-align: center;
    }
    #rt{
        text-align: center;
        display: none;
    }
</style>
<body>
    <div class="topnav">
        <a class="active" href="/home">Home</a>
        <a href="#contact">Contact</a>
        <a href="#about">About</a>
    </div>

    <div class="col shadow p-5 mb-5 bg-white rounded">
        <div class="form-group row">
            <b><label for="Floor">Floor</label></b>
            <div class="col-sm-10 mb-3">

                <select class="form-control" id="floor">
                <option value="1">Ground Floor</option>
                <option value="2">First Floor</option>
                <option value="3">Second Floor</option>
                <option value="4">Third Floor</option>
                </select>
            </div>
        </div>
    </div>
    <div class="col shadow p-3 mb-5 bg-white rounded" id="rt">
        
        <table class="table table-borderless" id="groundfloor">
            <tbody>
              <tr>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" value="101" >101</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" value="101" >102</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" value="101" >103</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" value="101" >104</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" value="101" >105</button></td>
              </tr>
              <tr>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >106</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >107</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >108</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >109</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >110</button></td>
              </tr>
            </tbody>
          </table>

          
         <table class="table table-borderless" id="firstfloor">
              <tbody>
                  <tr>
                      <!-- <th scope="row"></th>  -->
                      <td><button class="btn rooms" onclick="getRoomNoID(this)">201</button></td>
                      <td><button class="btn rooms" onclick="getRoomNoID(this)">202</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >203</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >204</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >205</button></td>
              </tr>
              <tr>
                <td><button class="btn rooms" onclick="getRoomNoID(this)">206</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)">207</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)">208</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)">209</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)">210</button></td>
              </tr>
            </tbody>
          </table>

          <table class="table table-borderless" id="secondfloor">
            <tbody>
              <tr>
                <!-- <th scope="row"></th> -->
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >301</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >302</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >303</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >304</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >305</button></td>
              </tr>
              <tr>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >306</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >307</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >308</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >309</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >310</button></td>
              </tr>
            </tbody>
          </table>
          <table class="table table-borderless" id="thirdfloor">
            <tbody>
              <tr>
                <!-- <th scope="row"></th> -->
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >402</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >401</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >403</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >404</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >405</button></td>
              </tr>
              <tr>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >406</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >407</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >408</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >409</button></td>
                <td><button class="btn rooms" onclick="getRoomNoID(this)" >410</button></td>
              </tr>
            </tbody>
          </table>
    </div>

    <div id='roomArrangment' class="roomArrangment col-sm-6" style='visibility:hidden;' >
      <div class = "row mb-2">
      <button id="f1" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)" >FAN 1</button>
      <button id="f2" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)" >FAN 2</button>
      <button id="f3" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)" >FAN 3</button>
      </div>
      <button id="proj" class="btn btn-secondary col-sm-8" onclick="getCompID(this)">PROJECTOR</button>
      <div class = "row mt-2">
        <button id="l1" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)">LIGHT 1</button>
        <button id="l2" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)">LIGHT 2</button>
        <button id="l3" class="btn btn-secondary col-sm-3 mx-1" onclick="getCompID(this)">LIGHT 3</button>
        </div>
    </div>
    <button class="btn btn-success" onclick="SubmitFault()" >Submit Complaint</button>
</body>

<script>
    const floorSelect = document.getElementById('floor');
    const groundfloorTable = document.getElementById('groundfloor');
    const firstFloorTable = document.getElementById('firstfloor');
    const secondFloorTable = document.getElementById('secondfloor');
    const thirdFloorTable = document.getElementById('thirdfloor');
    
    document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); });

    floorSelect.addEventListener('change', function () {
        document.getElementById('rt').style.display = "block"
        firstFloorTable.style.display = 'none';
        secondFloorTable.style.display = 'none';
        thirdFloorTable.style.display = 'none';
        groundfloorTable.style.display = 'none';

        if (floorSelect.value === '1') {
            groundfloorTable.style.display = 'block';
            document.cookie = "floor=1";
        } 
        else if (floorSelect.value === '2') {
            document.getElementById('firstfloor').style.display = 'block';
            document.cookie = "floor=2";
          }
        else if (floorSelect.value === '3') {
            document.getElementById('secondfloor').style.display = 'block';
            document.cookie = "floor=3";
          } 
        else if (floorSelect.value === '4') {
            document.getElementById('thirdfloor').style.display = 'block';
            document.cookie = "floor=4";
          }
    });
    function getRoomNoID(e){
      document.cookie = ("roomNo="+e.value);
      document.getElementById('roomArrangment').style.visibility = 'visible';
    }
    function getCompID(e){
      let cookie = {};
      var allComp = [];
      document.cookie.split(';').forEach(function(el) {
        let [key,value] = el.split('=');
        var k = key.trim()
        if(k == 'compId'){
          allComp = JSON.parse(value);
        }
      })
      allComp.push(e.id);
      document.cookie = ("compId="+JSON.stringify(allComp));
      document.getElementById(e.id).style.background = "green";
    }
    function SubmitFault(){
      var res = {};
      document.cookie.split(';').forEach(function(el) {
        let [key,value] = el.split('=');
        var k = key.trim()
        if(k == 'compId'){
          res[k] = JSON.parse(value);
        }
        else{
          res[k] = JSON.parse(value);
        }
      })
      console.log(res);
    }
</script>

</html>